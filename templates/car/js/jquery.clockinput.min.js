(function(a){function b(f,c){f=f.toString();var e=c-f.length;for(var d=0;d<e;d++){f="0"+f}return f}a.fn.clockInput=function(i){var o=0,p=1;var j=a(this);j.addClass("jq-ci-p");var y;var x;var v=23,s=0,h=59,d=0;if(j.attr("max")){var w=j.attr("max").split(":");v=Number(w[0]);h=Math.round(w[1]/5)*5}if(j.attr("min")){var u=j.attr("min").split(":");s=Number(u[0]);d=Math.round(u[1]/5)*5}if(s>v||(s==v&&d>h)){console.error("Improper bounds. input.min attribute must be less than or equal to input.max.");return}var r=a("<div>",{"class":"jq-ci"});function c(z){r.removeClass("jq-ci--h jq-ci--m");switch(z){case o:r.addClass("jq-ci--h");break;case p:if(!i){r.addClass("jq-ci--m")}else{c(o)}break}}c(o);var q=a("<div>",{"class":"jq-ci-t"});r.append(q);var n=a("<span>",{html:"--","class":"jq-ci-t_h"}).click(function(){c(o)});var l=a("<span>",{html:"--","class":"jq-ci-t_m"}).click(function(){c(p)});var k=a("<span>",{html:"<span>AM</span><span>PM</span>","class":"jq-ci-t_ap"}).click(function(){y.setHours(y.getHours()+(y.getHours()>=12?-12:12));f()});q.append(n).append(":").append(l).append(k);function f(D){if(D){y=new Date(Date.parse("0 "+j.val())||0)}y.setSeconds(0);y.setMilliseconds(0);var z=y.getHours();if(z<s){z=s}else{if(z>v){z=v}}y.setHours(z);x=y.getHours()>11;if(x){k.addClass("jq-ci-t_ap--s")}else{k.removeClass("jq-ci-t_ap--s")}m.children().removeClass("jq-ci-h_h--s jq-ci-hide");t[z-(x?12:0)].addClass("jq-ci-h_h--s");n.html(z==0?12:(z-(z>12?12:0)));for(var C=0;C<s;C++){if(C>=12&&x){t[C-12].addClass("jq-ci-hide")}else{if(C<12&&!x){t[C].addClass("jq-ci-hide")}}}for(var C=v;C<24;C++){if(C>(v+(h/60))){if(C>=12&&x){t[C-12].addClass("jq-ci-hide")}else{if(C<12&&!x){t[C].addClass("jq-ci-hide")}}}}var B=Math.round(y.getMinutes()/5)*5;if(z==v&&B>h){B=h}else{if(z==s&&B<d){B=d}}y.setMinutes(B);e.children().removeClass("jq-ci-m_m--s jq-ci-hide");g[B/5].addClass("jq-ci-m_m--s");l.html(b(B,2));if(z==v){for(var C=h+5;C<60;C+=5){g[C/5].addClass("jq-ci-hide")}}if(z==s){for(var C=0;C<d;C+=5){g[C/5].addClass("jq-ci-hide")}}var A=b(y.getHours(),2)+":"+b(y.getMinutes(),2);if(A!=j.val()){j.val(A).trigger("change")}}var m=a("<div>",{"class":"jq-ci-h"});var t=[];r.append(m);m.on("click","span",function(){var z=(Number)(a(this).text());if(z==12){z=0}z+=(x?12:0);y.setHours(z);f();c(p)});(function(){for(var A=0;A<12;A++){var z=a("<span>",{"class":"jq-ci-h_h jq-ci-h_h--"+A,html:(A==0?12:A)});t.push(z);m.append(z)}}());var e=a("<div>",{"class":"jq-ci-m"});var g=[];r.append(e);e.on("click","span",function(){y.setMinutes((Number)(a(this).text()));f()});(function(){for(var A=0;A<60;A+=5){var z=a("<span>",{"class":"jq-ci-m_m jq-ci-m_m--"+A,html:b(A,2)});g.push(z);e.append(z)}}());j.after(r).change(function(){f()});f(true);return this}}(jQuery));